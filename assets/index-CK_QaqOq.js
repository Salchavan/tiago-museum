(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("backToTop");document.addEventListener("keydown",n=>{n.ctrlKey&&n.key.toLowerCase()==="k"&&(n.preventDefault(),window.location.href="./login.html")}),r&&(window.addEventListener("scroll",()=>{window.pageYOffset>300?r.classList.remove("hidden"):r.classList.add("hidden")}),r.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})),document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",s=>{s.preventDefault();const t=n.getAttribute("href");if(!t||t==="#")return;const i=document.querySelector(t);i&&window.scrollTo({top:i.offsetTop-80,behavior:"smooth"})})}),document.querySelector("button.md\\:hidden")?.addEventListener("click",()=>{alert("Mobile menu would open here. In a real implementation, this would show/hide a menu.")})});const m=()=>{const r=document.getElementById("open-reservation-modal"),e=document.getElementById("reservation-modal"),n=e?.querySelector("[data-modal-close]");if(!r||!e)return;const s=t=>{t?(e.classList.remove("hidden"),document.body.classList.add("overflow-hidden")):(e.classList.add("hidden"),document.body.classList.remove("overflow-hidden"))};r.addEventListener("click",()=>s(!0)),n?.addEventListener("click",()=>s(!1)),e.addEventListener("click",t=>{t.target===e&&s(!1)}),document.addEventListener("keydown",t=>{t.key==="Escape"&&!e.classList.contains("hidden")&&s(!1)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m();const p=()=>{const r=document.getElementById("open-restorations-modal"),e=document.getElementById("restorations-modal"),n=e?.querySelector("[data-modal-close]");if(!r||!e)return;const s=t=>{t?(e.classList.remove("hidden"),document.body.classList.add("overflow-hidden")):(e.classList.add("hidden"),document.body.classList.remove("overflow-hidden"))};r.addEventListener("click",()=>s(!0)),n?.addEventListener("click",()=>s(!1)),e.addEventListener("click",t=>{t.target===e&&s(!1)}),document.addEventListener("keydown",t=>{t.key==="Escape"&&!e.classList.contains("hidden")&&s(!1)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p();const f=()=>{const r=document.getElementById("open-news-modal"),e=document.getElementById("news-modal"),n=e?.querySelector("[data-modal-close]"),s=e?.querySelector("#news-modal-list");if(!r||!e)return;const t=i=>{i?(e.classList.remove("hidden"),document.body.classList.add("overflow-hidden")):(e.classList.add("hidden"),document.body.classList.remove("overflow-hidden"))};r.addEventListener("click",()=>t(!0)),n?.addEventListener("click",()=>t(!1)),e.addEventListener("click",i=>{i.target===e&&t(!1)}),document.addEventListener("keydown",i=>{i.key==="Escape"&&!e.classList.contains("hidden")&&t(!1)}),s&&L(s)},L=async r=>{r.innerHTML=`
    <div class="text-gray-500 text-sm col-span-full">
      Cargando noticias...
    </div>
  `;try{const e=await fetch("./src/data/n.json");if(!e.ok)throw new Error("No se pudo obtener la lista de noticias");const n=await e.json();if(!n.length){r.innerHTML=`
        <div class="text-gray-500 text-sm col-span-full text-center py-8">
          No hay noticias disponibles en este momento.
        </div>
      `;return}const s=document.createDocumentFragment();n.forEach(t=>{s.appendChild(E(t))}),r.innerHTML="",r.appendChild(s)}catch(e){console.error("Error al cargar las noticias:",e),r.innerHTML=`
      <div class="text-red-600 text-sm col-span-full text-center py-8">
        No se pudieron cargar las noticias. Inténtalo nuevamente más tarde.
      </div>
    `}},E=r=>{const e=document.createElement("article");e.className="bg-gray-50 border border-gray-100 rounded-2xl p-4 flex flex-col gap-3";const n=new Date(r.date),s=isNaN(n.getTime())?r.date:n.toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric"});e.innerHTML=`
    <div class="flex items-center justify-between text-xs uppercase tracking-wide text-gray-500">
      <span class="font-semibold text-black/70">${r.type}</span>
      <span>${s}</span>
    </div>
    <h4 class="text-lg font-semibold leading-snug">${r.title}</h4>
    <p class="text-sm text-gray-600 flex-1">${r.description}</p>
    <a class="text-sm font-semibold gold-text hover:underline inline-flex items-center gap-2 mt-auto">
      <span>Ver detalle</span>
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-6-6 6 6-6 6" />
      </svg>
    </a>
  `;const t=e.querySelector("a");return t&&(t.setAttribute("href",r.link||"#"),t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer")),e};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",f):f();const v=()=>{const r=document.getElementById("open-donation-modal"),e=document.getElementById("donation-modal"),n=e?.querySelector("[data-modal-close]");if(!r||!e)return;const s=t=>{t?(e.classList.remove("hidden"),document.body.classList.add("overflow-hidden")):(e.classList.add("hidden"),document.body.classList.remove("overflow-hidden"))};r.addEventListener("click",()=>s(!0)),n?.addEventListener("click",()=>s(!1)),e.addEventListener("click",t=>{t.target===e&&s(!1)}),document.addEventListener("keydown",t=>{t.key==="Escape"&&!e.classList.contains("hidden")&&s(!1)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",v):v();const g=()=>{const r=document.getElementById("open-comment-modal"),e=document.getElementById("comment-modal"),n=e?.querySelector("[data-modal-close]");if(!r||!e)return;const s=i=>{i?(e.classList.remove("hidden"),document.body.classList.add("overflow-hidden")):(e.classList.add("hidden"),document.body.classList.remove("overflow-hidden"))};r.addEventListener("click",()=>s(!0)),n?.addEventListener("click",()=>s(!1)),e.addEventListener("click",i=>{i.target===e&&s(!1)}),document.addEventListener("keydown",i=>{i.key==="Escape"&&!e.classList.contains("hidden")&&s(!1)});const t=e.querySelector("#comment-form");t?.addEventListener("submit",i=>{i.preventDefault(),t.reset(),s(!1)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g();const y=()=>{const r=document.getElementById("comments-cards");r&&S(r)},S=async r=>{r.innerHTML=`
    <div class="text-gray-500 text-sm col-span-full">
      Cargando comentarios...
    </div>
  `;try{const e=await fetch("./src/data/c.json");if(!e.ok)throw new Error("No se pudo obtener la lista de comentarios");const n=await e.json();if(!Array.isArray(n)||n.length===0){r.innerHTML=`
        <div class="text-gray-500 text-sm col-span-full text-center py-8">
          No hay comentarios disponibles en este momento.
        </div>
      `;return}const s=[...n].sort((i,o)=>{const a=w(i.date)?.getTime()??-1/0;return(w(o.date)?.getTime()??-1/0)-a});r.innerHTML="";const t=document.createDocumentFragment();for(const i of s)t.appendChild(k(i));r.appendChild(t)}catch(e){console.error("Error al cargar comentarios de la sección:",e),r.innerHTML=`
      <div class="text-red-600 text-sm col-span-full text-center py-8">
        No se pudieron cargar los comentarios.
      </div>
    `}},k=r=>{const e=document.createElement("article");e.className="bg-white rounded-lg overflow-hidden shadow-lg news-card";const n=document.createElement("div");n.className="p-6";const s=document.createElement("div");s.className="flex flex-row items-center gap-4 mb-4";const t=document.createElement("img");t.src=r.perfilicon,t.alt=`Foto de ${r.username}`,t.className="h-16 w-16 rounded-full object-cover";const i=document.createElement("div"),o=document.createElement("h3");o.className="text-xl font-bold",o.textContent=r.username;const a=document.createElement("span");a.className="text-gray-500 text-sm",a.textContent=r.date,i.appendChild(o),i.appendChild(a),s.appendChild(t),s.appendChild(i);const d=document.createElement("p");return d.className="text-gray-700",d.textContent=r.text,n.appendChild(s),n.appendChild(d),e.appendChild(n),e};function w(r){const e=/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.exec(r.trim());if(!e){const l=new Date(r);return isNaN(l.getTime())?null:l}const[,n,s,t]=e,i=Number(n),o=Number(s),a=Number(t);if(!Number.isFinite(i)||!Number.isFinite(o)||!Number.isFinite(a))return null;const d=new Date(a,i-1,o);return isNaN(d.getTime())?null:d}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();let u=null;const x=()=>{const r=document.getElementById("reservation-form"),e=document.getElementById("reservation-status");!r||!e||r.addEventListener("submit",async n=>{n.preventDefault();const s=C(new FormData(r));if(!s){c(e,"Completa todos los campos obligatorios.","error");return}c(e,"Enviando reserva...","info");try{const t=await I(s);r.reset(),t==="download"?c(e,"Reserva guardada. Se descargó a.json actualizado (reemplaza src/data/a.json).","success"):t==="api"?c(e,"Reserva guardada en src/data/a.json.","success"):c(e,"Reserva enviada correctamente. Te contactaremos a la brevedad.","success")}catch(t){console.error("Error al enviar la reserva:",t),c(e,"No se pudo guardar la reserva. Intenta nuevamente más tarde.","error")}})},C=r=>{const e=l=>String(r.get(l)??"").trim(),n=e("date"),s=e("time"),t=e("dni"),i=e("name"),o=e("tel"),a=e("mail"),d=Number(r.get("cuantity"));return!n||!s||!t||!i||!o||!a||!Number.isFinite(d)||d<=0?null:{date:n,time:s,dni:t,name:i,tel:o,mail:a,cuantity:d}},c=(r,e,n)=>{const s={info:"text-gray-600",success:"text-green-600",error:"text-red-600"};r.textContent=e,r.classList.remove("text-gray-600","text-green-600","text-red-600"),r.classList.add(s[n])};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",x):x();const I=async r=>{try{return await N(r),"api"}catch{}if(window.showOpenFilePicker){const n=await T(),s=await P(n),t={id:b(s),...r};return s.push(t),await D(n,s),"file"}return await M(r),"download"},N=async r=>{const e=await fetch("/api/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),n=await e.json().catch(()=>null);if(!e.ok||!n?.success)throw new Error(n?.message||"No se pudo guardar la reserva")},T=async()=>{if(u)return u;const r=window.showOpenFilePicker;if(!r)throw new Error("No disponible showOpenFilePicker");const[e]=await r({multiple:!1,types:[{description:"Archivo JSON",accept:{"application/json":[".json"]}}]});if(!e)throw new Error("No se seleccionó ningún archivo");return u=e,e},M=async r=>{const e=await B(),n={id:b(e),...r},s=[...e,n];localStorage.setItem("tiago-museum:reservations",JSON.stringify(s)),A("a.json",s)},B=async()=>{const r=localStorage.getItem("tiago-museum:reservations");if(r)try{const e=JSON.parse(r);if(Array.isArray(e))return e}catch{}try{const e=await fetch("/src/data/a.json",{cache:"no-store"});if(!e.ok)return[];const n=await e.json();return Array.isArray(n)?n:[]}catch{return[]}},A=(r,e)=>{const n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(n),t=document.createElement("a");t.href=s,t.download=r,document.body.appendChild(t),t.click(),t.remove(),URL.revokeObjectURL(s)},P=async r=>{const n=await(await r.getFile()).text();if(!n.trim())return[];const s=JSON.parse(n);return Array.isArray(s)?s.filter(t=>!t||typeof t!="object"?!1:typeof t.id=="string"):[]},D=async(r,e)=>{const n=await r.createWritable();await n.write(JSON.stringify(e,null,2)),await n.close()},b=r=>{const e=r.reduce((n,s)=>{const t=Number(s.id);return Number.isFinite(t)&&t>n?t:n},0);return String(e+1)};class V{restorations=[];currentIndex=0;slidesPerView=3;autoSlideInterval=null;autoSlideDelay=5e3;sliderTrack;dotsContainer;prevBtn;nextBtn;sliderViewport;modalListContainer;constructor(){this.sliderTrack=document.getElementById("slider-track"),this.dotsContainer=document.getElementById("dots-container"),this.prevBtn=document.getElementById("prev-btn"),this.nextBtn=document.getElementById("next-btn"),this.modalListContainer=document.getElementById("restorations-modal-list");const e=this.sliderTrack.parentElement;if(!e)throw new Error("Slider viewport element not found");this.sliderViewport=e,this.setupEventListeners(),this.updateSlidesPerView(),window.addEventListener("resize",()=>this.updateSlidesPerView()),this.loadRestorations()}async loadRestorations(){try{const e=await fetch("./src/data/r.json");this.restorations=await e.json(),this.renderSliderCards(),this.renderModalCards(),this.startAutoSlide()}catch(e){console.error("Error cargando las restauraciones:",e),this.showErrorState()}}updateSlidesPerView(){const e=window.innerWidth;e<768?this.slidesPerView=1:e<1024?this.slidesPerView=2:this.slidesPerView=3,this.currentIndex=0,this.renderSliderCards()}renderSliderCards(){if(this.sliderTrack.innerHTML="",this.dotsContainer.innerHTML="",!this.restorations.length)return;const e=100/this.slidesPerView;this.restorations.forEach(s=>{const t=document.createElement("div");t.className="flex-none px-2 md:px-3",t.style.width=`${e}%`;const i=this.createRestorationCard(s,"slider");t.appendChild(i),this.sliderTrack.appendChild(t)});const n=Math.max(1,Math.ceil(this.restorations.length/this.slidesPerView));for(let s=0;s<n;s++){const t=document.createElement("button");t.className=`w-3 h-3 rounded-full transition-all duration-300 ${s===this.currentIndex?"bg-black scale-125":"bg-gray-300 hover:bg-gray-400"}`,t.setAttribute("data-slide",s.toString()),t.addEventListener("click",()=>this.goToSlide(s)),this.dotsContainer.appendChild(t)}this.currentIndex>=n&&(this.currentIndex=n-1),this.updateSliderPosition()}createRestorationCard(e,n="slider"){const s=document.createElement("div");s.className="bg-white rounded-lg overflow-hidden shadow-lg news-card flex flex-col",n==="slider"&&s.classList.add("h-full");const t=new Date(e.date_started).toLocaleDateString("es-ES",{month:"long",year:"numeric"});return s.innerHTML=`
      <div class="relative overflow-hidden group">
        <img 
          src="${e.image}" 
          alt="${e.title}"
          class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-110"
          loading="lazy"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
        <div class="absolute bottom-0 left-0 right-0 p-4 transform translate-y-full group-hover:translate-y-0 transition-transform duration-300">
          <span class="text-white text-sm bg-black/70 px-3 py-1 rounded-full">
            Iniciado: ${t}
          </span>
        </div>
      </div>
      <div class="p-6 flex-1 flex flex-col">
        <h3 class="text-xl font-bold mb-3 line-clamp-1">${e.title}</h3>
        <p class="text-gray-600 mb-4 flex-1 line-clamp-3">${e.description}</p>
        <a 
          href="#" 
          class="gold-text font-semibold hover:underline inline-flex items-center justify-between mt-auto"
          data-restoration-id="${e.restoration_id}"
        >
          <span>Ver proyecto</span>
          <svg class="w-4 h-4 ml-2 transform transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
          </svg>
        </a>
      </div>
    `,s.classList.add("group"),s.querySelector("a")?.addEventListener("click",o=>{o.preventDefault(),this.handleProjectClick(e.restoration_id)}),s}renderModalCards(){if(this.modalListContainer){if(this.modalListContainer.innerHTML="",!this.restorations.length){this.modalListContainer.innerHTML=`
        <div class="text-gray-500 text-sm col-span-full text-center py-8">
          No hay restauraciones disponibles en este momento.
        </div>
      `;return}this.restorations.forEach(e=>{const n=this.createRestorationCard(e,"modal");this.modalListContainer?.appendChild(n)})}}setupEventListeners(){this.prevBtn.addEventListener("click",()=>this.prevSlide()),this.nextBtn.addEventListener("click",()=>this.nextSlide()),this.sliderTrack.addEventListener("mouseenter",()=>this.stopAutoSlide()),this.sliderTrack.addEventListener("mouseleave",()=>this.startAutoSlide()),this.prevBtn.addEventListener("mouseenter",()=>this.stopAutoSlide()),this.nextBtn.addEventListener("mouseenter",()=>this.stopAutoSlide()),document.addEventListener("keydown",s=>{s.key==="ArrowLeft"&&this.prevSlide(),s.key==="ArrowRight"&&this.nextSlide()});let e=0,n=0;this.sliderTrack.addEventListener("touchstart",s=>{e=s.changedTouches[0].screenX,this.stopAutoSlide()}),this.sliderTrack.addEventListener("touchend",s=>{n=s.changedTouches[0].screenX,this.handleSwipe(e,n),this.startAutoSlide()})}handleSwipe(e,n){const t=e-n;Math.abs(t)>50&&(t>0?this.nextSlide():this.prevSlide())}prevSlide(){const e=Math.ceil(this.restorations.length/this.slidesPerView);this.currentIndex=(this.currentIndex-1+e)%e,this.updateSliderPosition()}nextSlide(){const e=Math.ceil(this.restorations.length/this.slidesPerView);this.currentIndex=(this.currentIndex+1)%e,this.updateSliderPosition()}goToSlide(e){this.currentIndex=e,this.updateSliderPosition()}updateSliderPosition(){const e=this.sliderViewport.getBoundingClientRect().width,n=-this.currentIndex*e;this.sliderTrack.style.transform=`translateX(${n}px)`,this.dotsContainer.querySelectorAll("button").forEach((t,i)=>{i===this.currentIndex?(t.classList.remove("bg-gray-300"),t.classList.add("bg-black","scale-125")):(t.classList.remove("bg-black","scale-125"),t.classList.add("bg-gray-300"))})}startAutoSlide(){this.autoSlideInterval&&clearInterval(this.autoSlideInterval),!(Math.ceil(this.restorations.length/this.slidesPerView)<=1)&&(this.autoSlideInterval=window.setInterval(()=>{this.nextSlide()},this.autoSlideDelay))}stopAutoSlide(){this.autoSlideInterval&&(clearInterval(this.autoSlideInterval),this.autoSlideInterval=null)}handleProjectClick(e){console.log("Ver proyecto:",e),alert(`Ver detalles del proyecto ${e}`)}showErrorState(){this.sliderTrack.innerHTML=`
      <div class="w-full text-center py-12">
        <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.998-.833-2.732 0L4.732 16.5c-.77.833.192 2.5 1.732 2.5z"/>
        </svg>
        <h3 class="text-xl font-semibold text-gray-700 mb-2">Error al cargar</h3>
        <p class="text-gray-500">No se pudieron cargar las restauraciones. Por favor, intenta más tarde.</p>
        <button id="retry-btn" class="mt-4 px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors">
          Reintentar
        </button>
      </div>
    `,document.getElementById("retry-btn")?.addEventListener("click",()=>{this.loadRestorations()})}}document.addEventListener("DOMContentLoaded",()=>{new V});class j{items=[];currentIndex=0;slidesPerView=3;autoSlideInterval=null;autoSlideDelay=5e3;sliderTrack;dotsContainer;prevBtn;nextBtn;sliderViewport;constructor(){const e=document.getElementById("news-slider-track"),n=document.getElementById("news-dots-container"),s=document.getElementById("news-prev-btn"),t=document.getElementById("news-next-btn");if(!e||!n||!s||!t)return;this.sliderTrack=e,this.dotsContainer=n,this.prevBtn=s,this.nextBtn=t;const i=this.sliderTrack.parentElement;if(!i)throw new Error("News slider viewport element not found");this.sliderViewport=i,this.setupEventListeners(),this.updateSlidesPerView(),window.addEventListener("resize",()=>this.updateSlidesPerView()),this.loadNews()}async loadNews(){try{const e=await fetch("./src/data/n.json");if(!e.ok)throw new Error("No se pudo obtener la lista de noticias");const n=await e.json();this.items=Array.isArray(n)?n:[],this.items=[...this.items].sort((s,t)=>{const i=this.parseMmDdYyyy(s.date)?.getTime()??-1/0;return(this.parseMmDdYyyy(t.date)?.getTime()??-1/0)-i}),this.renderSliderCards(),this.startAutoSlide()}catch(e){console.error("Error cargando las noticias:",e),this.showErrorState()}}updateSlidesPerView(){const e=window.innerWidth;e<768?this.slidesPerView=1:e<1024?this.slidesPerView=2:this.slidesPerView=3,this.currentIndex=0,this.renderSliderCards()}renderSliderCards(){if(this.sliderTrack.innerHTML="",this.dotsContainer.innerHTML="",!this.items.length){this.sliderTrack.innerHTML=`
        <div class="w-full text-center py-8 text-gray-500 text-sm">
          No hay noticias disponibles en este momento.
        </div>
      `;return}const e=100/this.slidesPerView;this.items.forEach(s=>{const t=document.createElement("div");t.className="flex-none px-2 md:px-3",t.style.width=`${e}%`;const i=this.createNewsCard(s);t.appendChild(i),this.sliderTrack.appendChild(t)});const n=Math.max(1,Math.ceil(this.items.length/this.slidesPerView));for(let s=0;s<n;s++){const t=document.createElement("button");t.className=`w-3 h-3 rounded-full transition-all duration-300 ${s===this.currentIndex?"bg-black scale-125":"bg-gray-300 hover:bg-gray-400"}`,t.setAttribute("data-slide",s.toString()),t.addEventListener("click",()=>this.goToSlide(s)),this.dotsContainer.appendChild(t)}this.currentIndex>=n&&(this.currentIndex=n-1),this.updateSliderPosition()}createNewsCard(e){const n=document.createElement("article");return n.className="bg-white rounded-lg overflow-hidden shadow-lg news-card flex flex-col group h-full",n.innerHTML=`
      <div class="relative overflow-hidden">
        <img 
          src="${e.image}" 
          alt="${this.escapeHtml(e.title)}"
          class="w-full h-48 object-cover transition-transform duration-500 group-hover:scale-110"
          loading="lazy"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
      </div>
      <div class="p-6 flex-1 flex flex-col">
        <div class="flex justify-between items-center mb-4">
          <span class="text-sm font-semibold gold-text">${this.escapeHtml(e.type)}</span>
          <span class="text-gray-500 text-sm">${this.escapeHtml(e.date)}</span>
        </div>
        <h3 class="text-xl font-bold mb-3 line-clamp-2">${this.escapeHtml(e.title)}</h3>
        <p class="text-gray-700 mb-4 flex-1 line-clamp-3">${this.escapeHtml(e.description)}</p>
        <a 
          class="gold-text font-semibold hover:underline inline-flex items-center mt-auto"
          href="${e.link||"#"}"
          target="_blank"
          rel="noopener noreferrer"
        >
          <span>Saber más</span>
          <svg class="w-4 h-4 ml-2 transform transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
          </svg>
        </a>
      </div>
    `,n}setupEventListeners(){this.prevBtn.addEventListener("click",()=>this.prevSlide()),this.nextBtn.addEventListener("click",()=>this.nextSlide()),this.sliderTrack.addEventListener("mouseenter",()=>this.stopAutoSlide()),this.sliderTrack.addEventListener("mouseleave",()=>this.startAutoSlide()),this.prevBtn.addEventListener("mouseenter",()=>this.stopAutoSlide()),this.nextBtn.addEventListener("mouseenter",()=>this.stopAutoSlide());let e=0,n=0;this.sliderTrack.addEventListener("touchstart",s=>{e=s.changedTouches[0].screenX,this.stopAutoSlide()}),this.sliderTrack.addEventListener("touchend",s=>{n=s.changedTouches[0].screenX,this.handleSwipe(e,n),this.startAutoSlide()})}handleSwipe(e,n){const t=e-n;Math.abs(t)>50&&(t>0?this.nextSlide():this.prevSlide())}prevSlide(){const e=Math.ceil(this.items.length/this.slidesPerView);e<=1||(this.currentIndex=(this.currentIndex-1+e)%e,this.updateSliderPosition())}nextSlide(){const e=Math.ceil(this.items.length/this.slidesPerView);e<=1||(this.currentIndex=(this.currentIndex+1)%e,this.updateSliderPosition())}goToSlide(e){this.currentIndex=e,this.updateSliderPosition()}updateSliderPosition(){const e=this.sliderViewport.getBoundingClientRect().width,n=-this.currentIndex*e;this.sliderTrack.style.transform=`translateX(${n}px)`,this.dotsContainer.querySelectorAll("button").forEach((t,i)=>{i===this.currentIndex?(t.classList.remove("bg-gray-300"),t.classList.add("bg-black","scale-125")):(t.classList.remove("bg-black","scale-125"),t.classList.add("bg-gray-300"))})}startAutoSlide(){this.autoSlideInterval&&clearInterval(this.autoSlideInterval),!(Math.ceil(this.items.length/this.slidesPerView)<=1)&&(this.autoSlideInterval=window.setInterval(()=>{this.nextSlide()},this.autoSlideDelay))}stopAutoSlide(){this.autoSlideInterval&&(clearInterval(this.autoSlideInterval),this.autoSlideInterval=null)}showErrorState(){this.sliderTrack.innerHTML=`
      <div class="w-full text-center py-12">
        <svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.998-.833-2.732 0L4.732 16.5c-.77.833.192 2.5 1.732 2.5z"/>
        </svg>
        <h3 class="text-xl font-semibold text-gray-700 mb-2">Error al cargar</h3>
        <p class="text-gray-500">No se pudieron cargar las noticias. Por favor, intenta más tarde.</p>
        <button id="news-retry-btn" class="mt-4 px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-800 transition-colors">
          Reintentar
        </button>
      </div>
    `,document.getElementById("news-retry-btn")?.addEventListener("click",()=>{this.loadNews()})}parseMmDdYyyy(e){const n=/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/.exec(e.trim());if(!n){const h=new Date(e);return isNaN(h.getTime())?null:h}const[,s,t,i]=n,o=Number(s),a=Number(t),d=Number(i);if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(d))return null;const l=new Date(d,o-1,a);return isNaN(l.getTime())?null:l}escapeHtml(e){return e.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}}document.addEventListener("DOMContentLoaded",()=>{new j});
